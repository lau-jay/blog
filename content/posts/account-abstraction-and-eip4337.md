+++
title = "Account Abstraction and Eip4337"
date = 2023-09-08T23:51:43+08:00
images = []
tags = ["Eip4337", "Ethereum"]
categories = ["blockchain"]
draft = true
+++

在加密货币中，如果你丢失了私钥或忘记了种子短语，你将失去一切。
这是加密货币大规模采用的一个关键瓶颈——账户安全非常脆弱。
在互联网上，如果你丢失了密码，你通常可以通过双因素身份验证恢复你的帐户。
同样，这可以通过使用称为帐户抽象的新概念来构建在区块链技术上。

# 现有的用户体验和技术的问题
典型钱包（例如小狐狸钱包）管理所谓的外部拥有账户（EOA）包含:

* 用于识别的地址
* 一个nonce 用于跟踪交易的唯一性
* ETH余额用于支付gas fee

用户通过签名者拥有 EOA，签名者是一对加密密钥。公钥用于派生EOA地址，私钥用于签署交易。
从本质上讲，签名者有权从帐户中支出并进行交易。这里的一个关键思想是，签名者（尤其是私钥）
对于真正拥有资产至关重要。如果其他人掌握了你的密钥，这些资产将不再是你的。

EOA非常简陋 - 每笔交易都必须由EOA私钥手动签名，并且交易不能批量发送。
EOA出现的另一个问题是，它们被硬编码为使用椭圆曲线加密（ECDSA secp256k1）作为私钥签名，
而无法更改签名方案。

最后，最相关的痛点——存储私钥。如果丢失了私钥，钱包恢复是不可能的，这意味着安全性几乎完全依赖于人不犯错。

# 帐户抽象的高级概述 （AA）
从EOA转移到使用智能合约创建的钱包，这可以允许我们使用不同的加密签名方案，
向帐户添加多个签名者，设置有关签名交易的特定规则和角色等等

ERC-4337进行帐户抽象的各种用例及其优势：
* 社交恢复-钱包账户可以定制为社交恢复钱包，这些钱包由可用于批准交易的单个“签名密钥”控制，其中一定数量的“监护人”密钥，
其中大多数人可以协作更改帐户的签名密钥 
* 遗产继承开关(Dead man’s switch) — 这是一种机制，允许某人在经过一定时间后将其钱包的所有权转让给某个指定的接收者。
* 2FA - 为了提高安全性，如果这些交易符合某些特殊标准，智能钱包可以要求交易需要进行双因素身份验证（即使用多个密钥对交易进行签名）。
* 自定义签名方案/签名抽象 — ERC-4337允许对交易中的私钥签名进行自定义加密签名方案。
* 批量交易- EOA 一次只允许一个操作。智能钱包允许批量执行交易，这可以抽象为通过延时和事件驱动的流程
（例如，我们在 Web 2.0 中的订阅模型）自动化交易。
* Gas fee抽象-
    * Gas赞助- 交易签名者以外的人可以支付Gas fee
    * 使用 ERC-20 代币支付费用 — ERC-4337 接受以 ETH 以外的代币支付费用（包括在交易中收到的代币）。
* 角色和策略 — 智能钱包可以设置支出限额等策略。
* 会话密钥 — 减少签名次数，不需要每次操作都授权，也不会滥用签名授权。
。


